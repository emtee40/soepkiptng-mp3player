
                  Soepkip The Next Generation
     ----------------------------------------------------
             by Eric Lammerts <eric@lammerts.org>
              http://www.lammerts.org/software/


Features:
---------
* mp3 (+id3/id3v2), wav, lpac, flac & Ogg-Vorbis support.
* (My)SQL database with songs.
* nice web interface
* commandline interface

Requirements: (you can get things with (*) from my homepage)
-------------
* perl5
* mysql 3.22
  (3.23 recommended; 3.22 cannot do case-insensitive regexps)
* apache + mod_perl
* perl modules:
  - MP3-Info (optional)
  - MP3::Tag
  - CGI
  - DBI
  - ApacheDBI
  - Msql-Mysql-modules
  - TermReadKey (optional)
* cdrplay(*)
* resample(*)
* programs that decode the various sound formats to standard output:
  - mp3: get mp3toraw(*) and mpg123
  - wav: for instance splay
  - lpac:
    LPAC is a non-free lossless compression algorithm. You can get a linux
    binary from http://www-ft.ee.tu-berlin.de/~liebchen/lpac.html at no cost.
    The source is not available :-(.
    Also get lpac2raw(*)
  - flac:
    Flac is a free lossless compression algorithm, available from
    flac.sourceforge.net. It does not compress as well as lpac, but the
    difference is marginal.
  - Ogg-Vorbis:
    Unfortunately ogg123 cannot play to standard output.
    Get the libraries from http://www.xiph.org and ogg2raw(*)


On a Debian system you can install all the necessary software (except the
programs marked with (*), and MP3::Tag) with apt-get:

apt-get install libapache-mod-perl libapache-dbi-perl libdbd-mysql-perl \
   mysql-server libmpeg-mp3info-perl libterm-readkey-perl \
   splay libvorbis-dev flac

Perl modules can be installed directly from CPAN by starting "perl -MCPAN
-e shell" (you must answer some configuration questions if you do this for
the first time) and typing "install Some::Module".


Installation:
-------------
* create the database:
  sudo mysql -u root < soepkiptng_create.my
* reload the grant tables:
  sudo mysqladmin reload
* cp soepkiptng.conf /etc
  (or edit all scripts if you want a different location)
* edit /etc/soepkiptng.conf
* make the directory /var/local/soepkiptng and make sure
  it's writable for the user that will run soepkiptngd
* Add something like the following to /etc/apache/httpd.conf:

  Alias /soepkiptng /usr/local/soepkiptng/web

  <Directory /usr/local/soepkiptng/web>
    Options +ExecCGI
    DirectoryIndex index.cgi
    AddHandler perl-script .cgi
    PerlHandler Apache::Registry
    PerlRequire /usr/local/soepkiptng/modperl.pl
    PerlSendHeader On
  </Directory>

* run soepkiptng_update to add songs to the database
* run soepkiptngd -d to start playing with debugging on.
  If everything works alright, start it without -d to run it in the
  background. Debugging output is then sent to
  /var/local/soepkiptng/soepkiptng.err, which is automatically
  rotated if the size reaches 64Kbyte. Make sure file permissions
  in /var/local/soepkiptngd are OK. If you sometimes run soepkiptngd as root
  and sometimes as non-root you can expect problems.
 

TODO:
-----
* improve docs
* make music format more modular; maybe support xmms plugins
* silence before random songs
* fade-out/fade-in in pause/resume
* release of /dev/dsp during pause
* get correct info for VBR mp3's                   ->partially done
* ogg-vorbis support                               ->done
* reading of samplefreq/channels of lpac files.    ->done
* resampling & mono->stereo conversion	           ->done (quick hack)
* smooth transition between 2 songs (interpolation)
* id3/id3v2 support				   ->done (id3/id3v2)
* id3/id3v2 support for flac
* putting dbase info back in to mp3s using id3v2
* synchronize update of statusfile with cdrplay
* if currently playing song is missing from db, show "?" instead of nothing ->done
* fix kill problem when player spawns children	   ->done
* don't randomly select songs that were played less than min_random_time ago ->done

$Id$



Copyright:
----------
soepkiptng is (c) copyright 2000 Eric Lammerts <eric@lammerts.org>

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

A copy of the GNU General Public License is available on the World Wide Web
at `http://www.gnu.org/copyleft/gpl.html'.  You can also obtain it by
writing to the Free Software Foundation, Inc., 59 Temple Place - Suite 330,
Boston, MA 02111-1307, USA.

